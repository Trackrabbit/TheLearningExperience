SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 Create Procedure [dbo].[SVC_Add_Route_To_Item]  (@ITEMNMBR char(31), @ROUTEID char(11)) As declare @SEQUENCE1 numeric(19,5) declare @DSCRIPTN char(31) declare @DEPSTATGRP char(11) declare @STATIONID char(11) declare @TECHID char(11) declare @ETTR numeric(19,5) declare @ROUTEPROC char(11) declare @SERVICEBOM char(31) declare @NEWNOTEINDEX numeric(19,5) declare @NOTEINDEX numeric(19,5) declare RI_cursor CURSOR for select SEQUENCE1,DSCRIPTN,DEPSTATGRP,STATIONID,  TECHID,ETTR,ROUTEPROC,SERVICEBOM,NOTEINDX   from SVC06011 where ROUTEID = @ROUTEID order by SEQUENCE1 set nocount on OPEN RI_cursor FETCH NEXT FROM RI_cursor INTO  @SEQUENCE1,@DSCRIPTN,@DEPSTATGRP,@STATIONID,  @TECHID,@ETTR,@ROUTEPROC,@SERVICEBOM,@NOTEINDEX  WHILE (@@FETCH_STATUS <> -1) begin  select @NEWNOTEINDEX = 0  if @NOTEINDEX <> 0   BEGIN  exec SVC_Copy_Note @NOTEINDEX, @NEWNOTEINDEX OUTPUT  END  insert into SVC06016   values(@ROUTEID,@ITEMNMBR,@SEQUENCE1,@DSCRIPTN,@DEPSTATGRP,@STATIONID,@TECHID,@ETTR,@ROUTEPROC,@SERVICEBOM,@NEWNOTEINDEX)  FETCH NEXT FROM RI_cursor INTO @SEQUENCE1,@DSCRIPTN,@DEPSTATGRP,@STATIONID,  @TECHID,@ETTR,@ROUTEPROC,@SERVICEBOM,@NOTEINDEX  end DEALLOCATE RI_cursor return (0)    
GO
GRANT EXECUTE ON  [dbo].[SVC_Add_Route_To_Item] TO [DYNGRP]
GO
