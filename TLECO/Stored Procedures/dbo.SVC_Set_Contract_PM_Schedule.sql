SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE PROCEDURE [dbo].[SVC_Set_Contract_PM_Schedule]  (  @CONSTS smallint,  @CONTNBR char(11),  @LNSEQNBR numeric(19,5),  @EQUIPID integer )  AS declare @ITEMNMBR char(31) select @ITEMNMBR = ITEMNMBR from  SVC00601   where   CONSTS = @CONSTS and  CONTNBR = @CONTNBR and  LNSEQNBR = @LNSEQNBR  delete from SVC00610  where   CONSTS = @CONSTS and  CONTNBR = @CONTNBR and  LNSEQNBR = @LNSEQNBR AND   EQUIPID = @EQUIPID if exists(select * from SVC00315 where EQUIPID = @EQUIPID)  BEGIN   insert into SVC00610  select   @CONSTS,  @CONTNBR,  @LNSEQNBR,  @EQUIPID,  ACTIVE,  SCHEDID  from SVC00315   where SVC00315.EQUIPID = @EQUIPID  END ELSE BEGIN  insert into SVC00610  select   @CONSTS,  @CONTNBR,  @LNSEQNBR,  @EQUIPID,  ACTIVE,  SCHEDID  from SVC01000   where SVC01000.ITEMNMBR = @ITEMNMBR END  return    
GO
GRANT EXECUTE ON  [dbo].[SVC_Set_Contract_PM_Schedule] TO [DYNGRP]
GO
