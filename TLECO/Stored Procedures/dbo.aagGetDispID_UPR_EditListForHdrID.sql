SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE  PROCEDURE [dbo].[aagGetDispID_UPR_EditListForHdrID] @iaaHdrID int, @iaaDistID int, @oDistID  int = 0 OUTPUT  AS BEGIN  DECLARE @DistID int  DECLARE @PYRNTYPE smallint  DECLARE @EMPLOYID char(15)  DECLARE @TRXNUMBER int  DECLARE @SEQNUMBR int  DECLARE @ACTINDX int  DECLARE @PYRLRTYP smallint   select @PYRNTYPE = PYRNTYPE, @EMPLOYID = Master_ID from AAG20000   where aaSubLedgerHdrID = @iaaHdrID   select @TRXNUMBER = TRXNUMBER,   @SEQNUMBR = SEQNUMBR,  @ACTINDX = ACTINDX,  @PYRLRTYP = PYRLRTYP  from AAG20001  where aaSubLedgerHdrID = @iaaHdrID and   aaSubLedgerDistID = @iaaDistID   SELECT USERID,  EMPLOYID,  PYRNTYPE,  PYRLRTYP,  TRXNUMBER,  SEQNUMBR,  ACTINDX,  AMNTOPST,  DEPRTMNT,  JOBTITLE,  PAYROLCD,  UPRACTYP,  PYADNMBR,  IDENTITY(int, 1,1) AS DisplayDistID  INTO #newtable1   FROM UPR10209  WHERE USERID = system_user and   PYRNTYPE = @PYRNTYPE  ORDER BY DEX_ROW_ID   SELECT @DistID = DisplayDistID FROM #newtable1   WHERE EMPLOYID = @EMPLOYID and   PYRNTYPE = @PYRNTYPE and   PYRLRTYP = @PYRLRTYP and   TRXNUMBER = @TRXNUMBER and   SEQNUMBR = @SEQNUMBR and   ACTINDX = @ACTINDX    SELECT @oDistID = @DistID END    
GO
GRANT EXECUTE ON  [dbo].[aagGetDispID_UPR_EditListForHdrID] TO [DYNGRP]
GO
