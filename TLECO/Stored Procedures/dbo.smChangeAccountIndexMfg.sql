SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
create procedure [dbo].[smChangeAccountIndexMfg]   @I_intStartAcct 	char(15),  @I_intEndAcct 		char(15),  @I_intACTINDX1 		int,  @I_intACTINDX2 		int,  @O_iErrorState 		int = NULL  output with encryption as set transaction isolation level read uncommitted set nocount on declare  @ACCOUNT_CHG 		char(255), @cStatement 		varchar(255), @budgetid		char(30), @tTransaction		tinyint, @tLoop			tinyint select @O_iErrorState 	 = 0 if not exists (select * from sysobjects where id = object_id('dbo.WO010032')  and sysstat & 0xf = 3) begin return end if @@trancount = 0    begin select @tTransaction = 1 begin transaction end while ( @tLoop is NULL ) begin select @tLoop = 1 if	@I_intStartAcct		is NULL or @I_intEndAcct		is NULL  begin select @O_iErrorState = 122		 break end  set nocount on update CT00102 set ICIVCCIXI = @I_intEndAcct where ICIVCCIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 1	 break end   update CT40401 set ICIVCCIXI = @I_intEndAcct where ICIVCCIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 2	 break end        update CT00102 set ICIVCLABOHIXI = @I_intEndAcct where ICIVCLABOHIXI = @I_intStartAcct if @@error <> 0  begin select @O_iErrorState = 3	 break end        update CT40401 set ICIVCLABOHIXI = @I_intEndAcct where ICIVCLABOHIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 4	 break end        update CT00102 set ICIVCLIXI = @I_intEndAcct where ICIVCLIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 5	 break end        update CT40401 set ICIVCLIXI = @I_intEndAcct where ICIVCLIXI = @I_intStartAcct           if @@error <> 0  begin select @O_iErrorState = 6	 break end        update CT00102 set ICIVCMACHOHIXI = @I_intEndAcct where ICIVCMACHOHIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 7	 break end        update CT40401 set ICIVCMACHOHIXI = @I_intEndAcct where ICIVCMACHOHIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 8	 break end        update CT00102 set ICIVCMATOHIXI = @I_intEndAcct where ICIVCMATOHIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 9	 break end        update CT40401 set ICIVCMATOHIXI = @I_intEndAcct where ICIVCMATOHIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 10	 break end        update CT00102 set ICIVCMIXI = @I_intEndAcct where ICIVCMIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 11	 break end        update CT40401 set ICIVCMIXI = @I_intEndAcct where ICIVCMIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 12	 break end        update CT00102 set ICIVCOGSLABOHVARIX_I = @I_intEndAcct where ICIVCOGSLABOHVARIX_I = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 13	 break end        update CT40401 set ICIVCOGSLABOHVARIX_I = @I_intEndAcct where ICIVCOGSLABOHVARIX_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 14	 break end        update CT00102 set ICIVCOGSMACHOHVARIX_I = @I_intEndAcct where ICIVCOGSMACHOHVARIX_I = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 15	 break end        update CT40401 set ICIVCOGSMACHOHVARIX_I = @I_intEndAcct where ICIVCOGSMACHOHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 16	 break end        update CT00102 set ICIVCOGSMATOHVARIX_I = @I_intEndAcct where ICIVCOGSMATOHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 17	 break end        update CT40401 set ICIVCOGSMATOHVARIX_I = @I_intEndAcct where ICIVCOGSMATOHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 18	 break end        update CT00102 set ICIVCOIXI = @I_intEndAcct where ICIVCOIXI = @I_intStartAcct         if @@error <> 0  begin select @O_iErrorState = 19	 break end        update CT40401 set ICIVCOIXI = @I_intEndAcct where ICIVCOIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 20	 break end        update CT00102 set ICIVILABOHIXI = @I_intEndAcct where ICIVILABOHIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 21	 break end        update CT40401 set ICIVILABOHIXI = @I_intEndAcct where ICIVILABOHIXI = @I_intStartAcct if @@error <> 0  begin select @O_iErrorState = 22	 break end        update CT00102 set ICIVILIXI = @I_intEndAcct where ICIVILIXI = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 23	 break end        update CT40401 set ICIVILIXI = @I_intEndAcct where ICIVILIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 24	 break end        update CT00102 set ICIVIMACHOHIXI = @I_intEndAcct where ICIVIMACHOHIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 25	 break end        update CT40401 set ICIVIMACHOHIXI = @I_intEndAcct where ICIVIMACHOHIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 26	 break end        update CT00102 set ICIVIMATOHIXI = @I_intEndAcct where ICIVIMATOHIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 27	 break end        update CT40401 set ICIVIMATOHIXI = @I_intEndAcct where ICIVIMATOHIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 28	 break end        update CT00102 set ICIVIMXI= @I_intEndAcct where ICIVIMXI = @I_intStartAcct            if @@error <> 0  begin select @O_iErrorState = 31	 break end        update CT40401 set ICIVIMXI= @I_intEndAcct where ICIVIMXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 32	 break end update CT00102 set ICIVINVLABOHVARIX_I = @I_intEndAcct where ICIVINVLABOHVARIX_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 33	 break end update CT40401 set ICIVINVLABOHVARIX_I = @I_intEndAcct where ICIVINVLABOHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 34	 break end update CT00102 set ICIVINVMACHOHVARIX_I = @I_intEndAcct where ICIVINVMACHOHVARIX_I = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 35	 break end update CT40401 set ICIVINVMACHOHVARIX_I = @I_intEndAcct where ICIVINVMACHOHVARIX_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 36	 break end update CT00102 set ICIVINVMATOHVARIX_I = @I_intEndAcct where ICIVINVMATOHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 37	 break end update CT40401 set ICIVINVMATOHVARIX_I = @I_intEndAcct where ICIVINVMATOHVARIX_I = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 38	 break end update CT00102 set ICIVLABVAROHIX_I = @I_intEndAcct where ICIVLABVAROHIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 40	 break end update CT40401 set ICIVLABVAROHIX_I = @I_intEndAcct where ICIVLABVAROHIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 41	 break end update CT00102 set ICIVLABVAROHVARIX_I = @I_intEndAcct where ICIVLABVAROHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 42	 break end update CT40401 set ICIVLABVAROHVARIX_I = @I_intEndAcct where ICIVLABVAROHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 43	 break end update CT00102 set ICIVLVIXI = @I_intEndAcct where ICIVLVIXI = @I_intStartAcct          if @@error <> 0  begin select @O_iErrorState = 44	 break end update CT40401 set ICIVLVIXI = @I_intEndAcct where ICIVLVIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 45	 break end update CT00102 set ICIVMACHEFFVAROHIX_I = @I_intEndAcct where ICIVMACHEFFVAROHIX_I = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 46	 break end update CT40401 set ICIVMACHEFFVAROHIX_I = @I_intEndAcct where ICIVMACHEFFVAROHIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 47	 break end update CT00102 set ICIVMACHEFFVAROHVARIX_I = @I_intEndAcct where ICIVMACHEFFVAROHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 48	 break end update CT40401 set ICIVMACHEFFVAROHVARIX_I = @I_intEndAcct where ICIVMACHEFFVAROHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 49	 break end update CT00102 set ICIVMATUSAGEVAROHIX_I = @I_intEndAcct where ICIVMATUSAGEVAROHIX_I = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 50	 break end update CT40401 set ICIVMATUSAGEVAROHIX_I = @I_intEndAcct where ICIVMATUSAGEVAROHIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 51	 break end update CT00102 set ICIVMATUSAGEVAROHVARIX_I = @I_intEndAcct where ICIVMATUSAGEVAROHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 52	 break end update CT40401 set ICIVMATUSAGEVAROHVARIX_I = @I_intEndAcct where ICIVMATUSAGEVAROHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 53	 break end update CT00102 set ICIVMEVIXI = @I_intEndAcct where ICIVMEVIXI = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 54	 break end update CT40401 set ICIVMEVIXI = @I_intEndAcct where ICIVMEVIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 55	 break end update CT00102 set ICIVMFIXI = @I_intEndAcct where ICIVMFIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 56	 break end update CT40401 set ICIVMFIXI = @I_intEndAcct where ICIVMFIXI = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 57	 break end update CT00102 set ICIVMUIXI = @I_intEndAcct where ICIVMUIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 59	 break end update CT40401 set ICIVMUIXI = @I_intEndAcct where ICIVMUIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 60	 break end update CT00102 set ICIVMVIXI = @I_intEndAcct where ICIVMVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 61	 break end update CT40401 set ICIVMVIXI = @I_intEndAcct where ICIVMVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 62	 break end update CT00102 set ICIVOVIXI = @I_intEndAcct where ICIVOVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 64	 break end update CT40401 set ICIVOVIXI = @I_intEndAcct where ICIVOVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 65	 break end update CT00102 set ICIVPVIXI = @I_intEndAcct where ICIVPVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 66	 break end update CT40401 set ICIVPVIXI = @I_intEndAcct where ICIVPVIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 67	 break end update CT00102 set ICIVROIXI = @I_intEndAcct where ICIVROIXI = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 68	 break end update CT40401 set ICIVROIXI = @I_intEndAcct where ICIVROIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 69	 break end update CT00102 set ICIVSCIXI = @I_intEndAcct where ICIVSCIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 70	 break end update CT40401 set ICIVSCIXI = @I_intEndAcct where ICIVSCIXI = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 71	 break end update CT00102 set ICIVUPPV_I = @I_intEndAcct where ICIVUPPV_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 72	 break end update CT40401 set ICIVUPPV_I = @I_intEndAcct where ICIVUPPV_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 73	 break end update CT00102 set ICIVWCIXI = @I_intEndAcct where ICIVWCIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 75	 break end update CT40401 set ICIVWCIXI = @I_intEndAcct where ICIVWCIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 76	 break end update CT00102 set ICIVWIPLABOHVARIX_I = @I_intEndAcct where ICIVWIPLABOHVARIX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 77	 break end update CT40401 set ICIVWIPLABOHVARIX_I = @I_intEndAcct where ICIVWIPLABOHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 78	 break end update CT00102 set ICIVWIPMACHOHVARIX_I = @I_intEndAcct where ICIVWIPMACHOHVARIX_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 79	 break end update CT40401 set ICIVWIPMACHOHVARIX_I = @I_intEndAcct where ICIVWIPMACHOHVARIX_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 80	 break end update CT00102 set ICIVWIPMATOHVARIX_I = @I_intEndAcct where ICIVWIPMATOHVARIX_I = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 81	 break end update CT40401 set ICIVWIPMATOHVARIX_I = @I_intEndAcct where ICIVWIPMATOHVARIX_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 82	 break end update CT00102 set ICIVWLIXI = @I_intEndAcct where ICIVWLIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 83	 break end update CT40401 set ICIVWLIXI = @I_intEndAcct where ICIVWLIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 84	 break end update CT00102 set ICIVWLOHIXI = @I_intEndAcct where ICIVWLOHIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 85	 break end update CT40401 set ICIVWLOHIXI = @I_intEndAcct where ICIVWLOHIXI = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 86	 break end update CT00102 set ICIVWMACHOHIXI = @I_intEndAcct where ICIVWMACHOHIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 87	 break end update CT40401 set ICIVWMACHOHIXI = @I_intEndAcct where ICIVWMACHOHIXI = @I_intStartAcct if @@error <> 0  begin select @O_iErrorState = 88	 break end update CT00102 set ICIVWMATOHIXI = @I_intEndAcct where ICIVWMATOHIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 89	 break end update CT40401 set ICIVWMATOHIXI = @I_intEndAcct where ICIVWMATOHIXI = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 90	 break end update CT00102 set ICIVWMIXI = @I_intEndAcct where ICIVWMIXI = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 91	 break end update CT40401 set ICIVWMIXI = @I_intEndAcct where ICIVWMIXI = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 92	 break end update CT00102 set ICIVWOIXI = @I_intEndAcct where ICIVWOIXI = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 93	 break end update CT40401 set ICIVWOIXI = @I_intEndAcct where ICIVWOIXI = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 94	 break end update CT00001 set LC_Fixed_Overhead = @I_intEndAcct where LC_Fixed_Overhead = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 95	 break end update LC010014 set LC_Fixed_Overhead = @I_intEndAcct where LC_Fixed_Overhead = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 96	 break end update CT00001 set LC_Labor_Applied = @I_intEndAcct where LC_Labor_Applied = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 97	 break end update LC010014 set LC_Labor_Applied = @I_intEndAcct where LC_Labor_Applied = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 98	 break end update CT00001 set LC_Variable_Overhead = @I_intEndAcct where LC_Variable_Overhead = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 99	 break end update LC010014 set LC_Variable_Overhead = @I_intEndAcct where LC_Variable_Overhead = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 100	 break end update CT00001 set Mach_Fixed_Ohd_Acct = @I_intEndAcct where Mach_Fixed_Ohd_Acct = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 101	 break end update MM010032 set Mach_Fixed_Ohd_Acct = @I_intEndAcct where Mach_Fixed_Ohd_Acct = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 102	 break end update CT00001 set Mach_Mach_Applied_Acct = @I_intEndAcct where Mach_Mach_Applied_Acct = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 103	 break end update MM010032 set Mach_Mach_Applied_Acct = @I_intEndAcct where Mach_Mach_Applied_Acct = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 104	 break end update CT00001 set Mach_Variable_Ohd_Acct = @I_intEndAcct where Mach_Variable_Ohd_Acct = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 105	 break end update MM010032 set Mach_Variable_Ohd_Acct = @I_intEndAcct where Mach_Variable_Ohd_Acct = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 106	 break end update POPS0132 set NON_INV_CRED_ACCT_IDX_I = @I_intEndAcct where NON_INV_CRED_ACCT_IDX_I = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 107	 break end update POPS0132 set NON_INV_DEB_ACCT_IDX_I = @I_intEndAcct where NON_INV_DEB_ACCT_IDX_I = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 108	 break end update BM10300 set Variance_Index = @I_intEndAcct where Variance_Index = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 109	 break end update BM30300 set Variance_Index = @I_intEndAcct where Variance_Index = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 110	 break end update WC010015 set EMPLOYEEHOURSOVERA_I = @I_intEndAcct where EMPLOYEEHOURSOVERA_I = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 111	 break end update WC010015 set MACHINEHOURSOVERAG_I = @I_intEndAcct where MACHINEHOURSOVERAG_I = @I_intStartAcct  if @@error <> 0  begin select @O_iErrorState = 112	 break end update COSS0401 set RNDDIFF = @I_intEndAcct where RNDDIFF = @I_intStartAcct       if @@error <> 0  begin select @O_iErrorState = 113	 break end update MC40201 set RNDDIFF = @I_intEndAcct where RNDDIFF = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 114	 break end update MC40301 set RNDDIFF = @I_intEndAcct where RNDDIFF = @I_intStartAcct     if @@error <> 0  begin select @O_iErrorState = 115	 break end update CT00001 set Mach_Mach_Applied_Acct = @I_intEndAcct where Mach_Mach_Applied_Acct = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 116	 break end update MM010032 set Mach_Mach_Applied_Acct = @I_intEndAcct where Mach_Mach_Applied_Acct = @I_intStartAcct    if @@error <> 0  begin select @O_iErrorState = 117	 break end update CT00001 set Mach_Fixed_Ohd_Acct = @I_intEndAcct where Mach_Fixed_Ohd_Acct = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 118	 break end update MM010032 set Mach_Fixed_Ohd_Acct = @I_intEndAcct where Mach_Fixed_Ohd_Acct = @I_intStartAcct      if @@error <> 0  begin select @O_iErrorState = 119	 break end update CT00001 set Mach_Variable_Ohd_Acct = @I_intEndAcct where Mach_Variable_Ohd_Acct = @I_intStartAcct   if @@error <> 0  begin select @O_iErrorState = 120	 break end update MM010032 set Mach_Variable_Ohd_Acct = @I_intEndAcct where Mach_Variable_Ohd_Acct = @I_intStartAcct if @@error <> 0  begin select @O_iErrorState = 121	 break end end  if @O_iErrorState <> 0 begin if @tTransaction = 1 rollback transaction end else if @tTransaction = 1 begin commit transaction end return  
GO
GRANT EXECUTE ON  [dbo].[smChangeAccountIndexMfg] TO [DYNGRP]
GO
