SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
create procedure [dbo].[ta1099ModifierProcess] @l_start datetime, @l_end datetime, @O_SQL_Error_State int = null  output with encryption as update PM30200 set TEN99AMNT = 0 where  TEN99TYPE = 1  and TEN99AMNT <> 0 update PM30300 set TEN99AMNT = 0 where DEFTEN99TYPE = 1 and TEN99AMNT <> 0 update a set a.TEN99AMNT = a.APPLDAMT, a.DEFTEN99TYPE = c.TEN99TYPE, a.DEFTEN99BOXNUMBER = c.TEN99BOXNUMBER from PM30300 a, PM30200 b, PM00200 c where a.APTVCHNM = b.VCHRNMBR and b.DOCTYPE <> 6 and a.DOCTYPE = 6 and b.DOCTYPE = 1 and a.DOCDATE >= @l_start and a.DOCDATE <= @l_end and a.TEN99AMNT = 0 and a.VENDORID = c.VENDORID and c.TEN99TYPE > 1 update b set b.TEN99AMNT = a.APPLDAMT, b.TEN99TYPE = c.TEN99TYPE, b.TEN99BOXNUMBER = c.TEN99BOXNUMBER from PM30300 a, PM30200 b, PM00200 c where a.APTVCHNM = b.VCHRNMBR and b.DOCTYPE <> 6 and a.DOCTYPE = 6 and b.DOCTYPE = 1 and a.DOCDATE >= @l_start and a.DOCDATE <= @l_end and b.TEN99AMNT = 0 and a.VENDORID = c.VENDORID and c.TEN99TYPE > 1 update a set a.TEN99AMNT = a.APPLDAMT, a.DEFTEN99TYPE = c.TEN99TYPE, a.DEFTEN99BOXNUMBER = c.TEN99BOXNUMBER from PM30300 a, PM20000 b, PM00200 c where a.APTVCHNM = b.VCHRNMBR and b.DOCTYPE <> 6 and a.DOCTYPE = 6 and  b.DOCTYPE = 1 and  a.DOCDATE >= @l_start and a.DOCDATE <= @l_end and a.TEN99AMNT = 0 and a.VENDORID = c.VENDORID and c.TEN99TYPE > 1 update b set b.TEN99AMNT = a.APPLDAMT, b.TEN99TYPE = c.TEN99TYPE, b.TEN99BOXNUMBER = c.TEN99BOXNUMBER from PM30300 a, PM20000 b, PM00200 c where a.APTVCHNM = b.VCHRNMBR and b.DOCTYPE <> 6 and a.DOCTYPE = 6 and  b.DOCTYPE = 1 and  a.DOCDATE >= @l_start and a.DOCDATE <= @l_end and b.TEN99AMNT = 0 and a.VENDORID = c.VENDORID and c.TEN99TYPE > 1 
GO
GRANT EXECUTE ON  [dbo].[ta1099ModifierProcess] TO [DYNGRP]
GO
