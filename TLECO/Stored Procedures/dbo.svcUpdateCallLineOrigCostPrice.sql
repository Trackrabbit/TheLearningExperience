SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 CREATE Procedure [dbo].[svcUpdateCallLineOrigCostPrice] (@SRVRECTYPE smallint, @CALLNBR char(11),@LineType char(3), @Line int, @CompSeq int) as  declare @I_sRateCalcMethod  smallint ,           @I_sViewMode  smallint,            @I_nExchangeRate  numeric(15,7),       @I_nDenomExchangeRate numeric(15,7),       @I_sMCTrxState  smallint,            @I_sDecimalPlaces  smallint,            @O_iErrorState          int declare @OrigPrice numeric(19,5) declare @OrigCost numeric(19,5) declare @UnitCost numeric(19,5) declare @UnitPrice numeric(19,5) declare @ExtCost numeric(19,5) declare @ExtPrice numeric(19,5) declare @OrigExtCost numeric(19,5) declare @OrigExtPrice numeric(19,5)  select @I_sRateCalcMethod = RATECALC,   @I_nExchangeRate = XCHGRATE,   @I_nDenomExchangeRate = DENXRATE,   @I_sMCTrxState = MCTRXSTT,  @I_sViewMode = 3,    @I_sDecimalPlaces = DECPLACS  from  SVC00200 where CALLNBR = @CALLNBR and SRVRECTYPE = @SRVRECTYPE  select @UnitCost = UNITCOST,@UnitPrice = UNITPRCE, @ExtCost=EXTDCOST,@ExtPrice = XTNDPRCE  from SVC00203  where CALLNBR = @CALLNBR and SRVRECTYPE = @SRVRECTYPE and LNITMSEQ = @Line and LINITMTYP=@LineType and CMPNTSEQ = @CompSeq   exec SVC_Convert_Amount @I_sRateCalcMethod, @I_sViewMode,@I_nExchangeRate,  @I_nDenomExchangeRate,@I_sMCTrxState,@I_sDecimalPlaces,  @UnitCost,@OrigCost OUTPUT, @O_iErrorState OUTPUT  exec SVC_Convert_Amount @I_sRateCalcMethod, @I_sViewMode,@I_nExchangeRate,  @I_nDenomExchangeRate,@I_sMCTrxState,@I_sDecimalPlaces,  @UnitPrice,@OrigPrice OUTPUT, @O_iErrorState OUTPUT  exec SVC_Convert_Amount @I_sRateCalcMethod, @I_sViewMode,@I_nExchangeRate,  @I_nDenomExchangeRate,@I_sMCTrxState,@I_sDecimalPlaces,  @ExtCost,@OrigExtCost OUTPUT, @O_iErrorState OUTPUT  exec SVC_Convert_Amount @I_sRateCalcMethod, @I_sViewMode,@I_nExchangeRate,  @I_nDenomExchangeRate,@I_sMCTrxState,@I_sDecimalPlaces,  @ExtPrice,@OrigExtPrice OUTPUT, @O_iErrorState OUTPUT  update SVC00203 with (rowlock) set ORUNTCST=@OrigCost, ORUNTPRC =@OrigPrice, OREXTCST=@OrigExtCost,OXTNDPRC=@OrigExtPrice  where CALLNBR = @CALLNBR and SRVRECTYPE = @SRVRECTYPE and LNITMSEQ = @Line and LINITMTYP=@LineType  and CMPNTSEQ = @CompSeq  return (0)    
GO
GRANT EXECUTE ON  [dbo].[svcUpdateCallLineOrigCostPrice] TO [DYNGRP]
GO
