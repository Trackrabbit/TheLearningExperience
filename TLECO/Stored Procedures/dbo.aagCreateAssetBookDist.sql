SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
CREATE PROC [dbo].[aagCreateAssetBookDist](  @ASSETINDEX INTEGER,  @aaAliasID INTEGER,  @COMPANYID SMALLINT,  @USERID VARCHAR(15),  @CREATEDIST SMALLINT OUTPUT ) AS BEGIN  DECLARE @Count INTEGER,  @BOOKINDEX INTEGER,  @aaFASetupID INTEGER   SET @CREATEDIST=0   DECLARE GETBOOKINDX CURSOR  FAST_FORWARD FOR  SELECT DISTINCT BOOKINDX FROM FA00902 WHERE ASSETINDEX=@ASSETINDEX and SOURCDOC='FAADD' AND (BOOKINDX IN (SELECT BOOKINDX FROM FA40200 WHERE PTGENLED =1) OR BOOKINDX = (SELECT CORPBOOKINDX  FROM FA49900))  OPEN GETBOOKINDX  FETCH NEXT FROM GETBOOKINDX INTO @BOOKINDEX  WHILE @@fetch_status = 0  BEGIN  EXEC aagFACreateSetupInfo @ASSETINDEX,@BOOKINDEX,@aaAliasID,@COMPANYID,@USERID,@aaFASetupID OUT  SET @CREATEDIST=1  FETCH NEXT FROM GETBOOKINDX INTO @BOOKINDEX  END  CLOSE GETBOOKINDX  DEALLOCATE GETBOOKINDX END   
GO
GRANT EXECUTE ON  [dbo].[aagCreateAssetBookDist] TO [DYNGRP]
GO
