SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 create procedure [dbo].[smAccountMasterFilterTriggers] as  exec  ('create trigger dbo.glFilter1InsertTrigger on GL00100F1 for insert as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint  select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter1InsertTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ') exec  ('create trigger dbo.glFilter2InsertTrigger on GL00100F2 for insert as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter2InsertTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ') exec  ('create trigger dbo.glFilter3InsertTrigger on GL00100F3 for insert as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter3InsertTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ') exec  ('create trigger dbo.glFilter4InsertTrigger on GL00100F4 for insert as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter4InsertTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ')  exec  ('create trigger dbo.glFilter1UpdateTrigger on GL00100F1 for update as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter1UpdateTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ')  exec  ('create trigger dbo.glFilter2UpdateTrigger on GL00100F2 for update as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter2UpdateTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ') exec  ('create trigger dbo.glFilter3UpdateTrigger on GL00100F3 for update as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter3UpdateTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ') exec  ('create trigger dbo.glFilter4UpdateTrigger on GL00100F4 for update as declare @iStatus int,  @iSQL_Error_State int,  @tErrorOccurred tinyint,  @iRaiserror int,  @iErrorState int,  @iError int,  @dbname char(5),  @cRaiserrorString char(255),  @sLanguageID smallint select  @tErrorOccurred = 0  if exists (  select  1  from  inserted  where  RELID not in (select RELID from DYNAMICS..ORG00100) and RELID <> 0)  begin  select @iRaiserror  = 21041,  @tErrorOccurred = 1  end if @tErrorOccurred = 1  begin  select  @sLanguageID    =       ACT.Language_ID  from  dbo.ACTIVITY   ACT  where  ACT.USERID =       system_user and  ACT.CMPNYNAM =       db_name()   select  @cRaiserrorString = SMESSAGE  from  DYNAMICS..GPS_SQL_Error_Codes  where  CODE = @iRaiserror and  Language_ID = @sLanguageID   if @@rowcount <> 1 or @@error <> 0  begin  select @dbname = db_name()  exec @iStatus = DYNAMICS.dbo.smGetMsgString  2219,  @dbname,  @cRaiserrorString  output,  @iErrorState output   select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@iErrorState <> 0)  select @cRaiserrorString = ''The following error occurred in trigger glFilter4UpdateTrigger, but the message for the error could not be retrieved. Message = ''   select @cRaiserrorString = @cRaiserrorString + convert(char(255),@iRaiserror)  end  RAISERROR (@cRaiserrorString, -1, -1)  rollback transaction  end ')    
GO
GRANT EXECUTE ON  [dbo].[smAccountMasterFilterTriggers] TO [DYNGRP]
GO
