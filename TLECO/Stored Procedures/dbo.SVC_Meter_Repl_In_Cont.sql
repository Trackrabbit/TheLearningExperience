SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 create procedure [dbo].[SVC_Meter_Repl_In_Cont](@ContractNumber char(11),  @LineNumber numeric(19,5),  @EquipID integer,  @ContStartDate datetime,  @EverReplaced1 tinyint output,  @EverReplaced2 tinyint output,  @EverReplaced3 tinyint output,  @EverReplaced4 tinyint output,  @EverReplaced5 tinyint output,  @Meter1 integer output,   @Meter2 integer output,   @Meter3 integer output,   @Meter4 integer output,   @Meter5 integer output  ) as select @ContStartDate = STRTDATE from SVC00601  where CONSTS = 2 and CONTNBR = @ContractNumber and LNSEQNBR = @LineNumber if exists(select * from SVC00301 where Replaces_1 = 1 and EQUIPID = @EquipID and LSTDTEDT >= @ContStartDate)  begin  select @EverReplaced1 = 1   end else  begin  select @EverReplaced1 = 0  end if exists(select * from SVC00301 where Replaces_2 = 1 and EQUIPID = @EquipID and LSTDTEDT >= @ContStartDate)  begin  select @EverReplaced2 = 1   end else  begin  select @EverReplaced2 = 0  end if exists(select * from SVC00301 where Replaces_3 = 1 and EQUIPID = @EquipID and LSTDTEDT >= @ContStartDate)  begin  select @EverReplaced3 = 1   end else  begin  select @EverReplaced3 = 0  end if exists(select * from SVC00301 where Replaces_4 = 1 and EQUIPID = @EquipID and LSTDTEDT >= @ContStartDate)  begin  select @EverReplaced4 = 1   end else  begin  select @EverReplaced4 = 0  end if exists(select * from SVC00301 where Replaces_5 = 1 and EQUIPID = @EquipID and LSTDTEDT >= @ContStartDate)  begin  select @EverReplaced5 = 1   end else  begin  select @EverReplaced5 = 0  end select @Meter1 = Meters_1,  @Meter2 = Meters_2,  @Meter3 = Meters_3,  @Meter4 = Meters_4,  @Meter5 = Meters_5 from SVC00300 where EQUIPID = @EquipID    
GO
GRANT EXECUTE ON  [dbo].[SVC_Meter_Repl_In_Cont] TO [DYNGRP]
GO
