SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE PROCEDURE [dbo].[SVC_ISC_Get_RMA](@RETDOCID char(15), @LNSEQNBR numeric(19,5)) as SELECT   SVC05200.RETDOCID,   SVC05200.LNSEQNBR,  SVC05200.Return_Record_Type,  SVC05200.ADRSCODE,  SVC05200.CUSTNMBR,  RM00101.CUSTNAME,   SVC05200.ADDRESS1,  SVC05200.ADDRESS2,  SVC05200.CITY,  SVC05200.STATE,  SVC05200.ZIPCODE,  SVC05200.RETSTAT,   SVC05200.CONTACT,  SVC05200.ENTDTE,  SVC05200.ENTTME,  CONVERT(varchar(10),SVC05200.ENTDTE,101) 'CONVENTDATE',  CONVERT(varchar(10),SVC05200.ENTTME,108) 'CONVENTTIME',  SVC05200.ITEMNMBR,   SVC05200.ETADTE,  SVC05200.ETATME,  CONVERT(varchar(10),SVC05200.ETADTE,101) 'CONVETADATE',  CONVERT(varchar(10),SVC05200.ETATME,108) 'CONVETATIME',  IV00101.ITEMDESC, IsNull(SVC05255.Return_Equipment_ID,0) 'Return_Equipment_ID', IsNull(SVC05255.Return_Serial_Number,'') 'Return_Serial_Number',  SVC05500.STSDESCR 'STATUS',  SVC05200.Received,  SY03900.TXTFIELD,  SVC05200.NTE_Price,  SVC05200.QUANTITY,  SVC05200.RETTYPE,  SVC05200.CSTPONBR,  SVC00300.WARREND,  SVC00300.SLRWEND,  SVC05200.SVC_RMA_Reason_Code,  SVC05200.SVC_RMA_Reason_Code_Desc,  SVC05200.RETREF , SVC05200.RETORIG  ,  SVC05200.ADDRESS3  FROM SVC05200 LEFT OUTER JOIN   RM00101 on (SVC05200.CUSTNMBR = RM00101.CUSTNMBR) LEFT OUTER JOIN  SY03900 ON (SVC05200.NOTEINDX = SY03900.NOTEINDX) LEFT OUTER JOIN   SVC05255 on ( SVC05200.RETDOCID = SVC05255.RETDOCID and SVC05200.LNSEQNBR = SVC05255.LNSEQNBR) left outer join  SVC00300 ON (SVC05255.Return_Equipment_ID = SVC00300.EQUIPID) LEFT OUTER JOIN  IV00101 ON (SVC05200.ITEMNMBR = IV00101.ITEMNMBR) LEFT OUTER JOIN  SVC05500 ON (SVC05200.RETSTAT = SVC05500.RETSTAT) where  SVC05200.RETDOCID = @RETDOCID and  SVC05200.LNSEQNBR = @LNSEQNBR   
GO
GRANT EXECUTE ON  [dbo].[SVC_ISC_Get_RMA] TO [DYNGRP]
GO
