SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 CREATE PROC [dbo].[zDP_CM20202N_2] (@BS int, @TRXDATE datetime, @EFTType smallint, @SERIES smallint, @DOCNUMBR char(21), @TRXDATE_RS datetime, @EFTType_RS smallint, @SERIES_RS smallint, @DOCNUMBR_RS char(21), @TRXDATE_RE datetime, @EFTType_RE smallint, @SERIES_RE smallint, @DOCNUMBR_RE char(21)) AS  set nocount on IF @TRXDATE_RS IS NULL BEGIN SELECT TOP 25  DOCNUMBR, SERIES, EFTType, EFTFileFormat, TRXDATE, Checkbook_Amount, CURNCYID, ISOCURRC, BACHNUMB, BCHSOURC, BCHCOMNT, paidtorcvdfrom, COMMENT1, SOURCDOC, VOIDDATE, AUDITTRAIL, ExecDate, RefNum, CHEKBKID, EFTBankTypeCB, EFTBankAcctCB, EFTBankBranchCB, EFTBankCodeCB, EFTBankBranchCodeCB, EFTBankCheckDigitCB, IntlBankAcctNum, TXRGNNUM, USERDEF1, USERDEF2, CustomerVendor_ID, ADRSCODE, EFTBankType, EFTBankAcct, EFTBankBranch, EFTBankCode, EFTBankBranchCode, EFTBankCheckDigit, CustVendIBAN, SWIFTADDR, CustVendCountryCode, DeliveryCountryCode, BNKCTRCD, CBANKCD, GIROPostType, RegCode1, RegCode2, BankInfo1, BankInfo2, BankInfo3, BankInfo4, BankInfo5, BankInfo6, BankInfo7, FedResBankNum, FedResClient, FedResBranch, DEX_ROW_ID FROM .CM20202 WHERE ( TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES = @SERIES AND DOCNUMBR > @DOCNUMBR OR TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES > @SERIES OR TRXDATE = @TRXDATE AND EFTType > @EFTType OR TRXDATE > @TRXDATE ) ORDER BY TRXDATE ASC, EFTType ASC, SERIES ASC, DOCNUMBR ASC END ELSE IF @TRXDATE_RS = @TRXDATE_RE BEGIN SELECT TOP 25  DOCNUMBR, SERIES, EFTType, EFTFileFormat, TRXDATE, Checkbook_Amount, CURNCYID, ISOCURRC, BACHNUMB, BCHSOURC, BCHCOMNT, paidtorcvdfrom, COMMENT1, SOURCDOC, VOIDDATE, AUDITTRAIL, ExecDate, RefNum, CHEKBKID, EFTBankTypeCB, EFTBankAcctCB, EFTBankBranchCB, EFTBankCodeCB, EFTBankBranchCodeCB, EFTBankCheckDigitCB, IntlBankAcctNum, TXRGNNUM, USERDEF1, USERDEF2, CustomerVendor_ID, ADRSCODE, EFTBankType, EFTBankAcct, EFTBankBranch, EFTBankCode, EFTBankBranchCode, EFTBankCheckDigit, CustVendIBAN, SWIFTADDR, CustVendCountryCode, DeliveryCountryCode, BNKCTRCD, CBANKCD, GIROPostType, RegCode1, RegCode2, BankInfo1, BankInfo2, BankInfo3, BankInfo4, BankInfo5, BankInfo6, BankInfo7, FedResBankNum, FedResClient, FedResBranch, DEX_ROW_ID FROM .CM20202 WHERE TRXDATE = @TRXDATE_RS AND EFTType BETWEEN @EFTType_RS AND @EFTType_RE AND SERIES BETWEEN @SERIES_RS AND @SERIES_RE AND DOCNUMBR BETWEEN @DOCNUMBR_RS AND @DOCNUMBR_RE AND ( TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES = @SERIES AND DOCNUMBR > @DOCNUMBR OR TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES > @SERIES OR TRXDATE = @TRXDATE AND EFTType > @EFTType OR TRXDATE > @TRXDATE ) ORDER BY TRXDATE ASC, EFTType ASC, SERIES ASC, DOCNUMBR ASC END ELSE BEGIN SELECT TOP 25  DOCNUMBR, SERIES, EFTType, EFTFileFormat, TRXDATE, Checkbook_Amount, CURNCYID, ISOCURRC, BACHNUMB, BCHSOURC, BCHCOMNT, paidtorcvdfrom, COMMENT1, SOURCDOC, VOIDDATE, AUDITTRAIL, ExecDate, RefNum, CHEKBKID, EFTBankTypeCB, EFTBankAcctCB, EFTBankBranchCB, EFTBankCodeCB, EFTBankBranchCodeCB, EFTBankCheckDigitCB, IntlBankAcctNum, TXRGNNUM, USERDEF1, USERDEF2, CustomerVendor_ID, ADRSCODE, EFTBankType, EFTBankAcct, EFTBankBranch, EFTBankCode, EFTBankBranchCode, EFTBankCheckDigit, CustVendIBAN, SWIFTADDR, CustVendCountryCode, DeliveryCountryCode, BNKCTRCD, CBANKCD, GIROPostType, RegCode1, RegCode2, BankInfo1, BankInfo2, BankInfo3, BankInfo4, BankInfo5, BankInfo6, BankInfo7, FedResBankNum, FedResClient, FedResBranch, DEX_ROW_ID FROM .CM20202 WHERE TRXDATE BETWEEN @TRXDATE_RS AND @TRXDATE_RE AND EFTType BETWEEN @EFTType_RS AND @EFTType_RE AND SERIES BETWEEN @SERIES_RS AND @SERIES_RE AND DOCNUMBR BETWEEN @DOCNUMBR_RS AND @DOCNUMBR_RE AND ( TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES = @SERIES AND DOCNUMBR > @DOCNUMBR OR TRXDATE = @TRXDATE AND EFTType = @EFTType AND SERIES > @SERIES OR TRXDATE = @TRXDATE AND EFTType > @EFTType OR TRXDATE > @TRXDATE ) ORDER BY TRXDATE ASC, EFTType ASC, SERIES ASC, DOCNUMBR ASC END set nocount off    
GO
GRANT EXECUTE ON  [dbo].[zDP_CM20202N_2] TO [DYNGRP]
GO
