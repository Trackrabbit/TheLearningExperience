SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE Procedure [dbo].[SVC_GetContractTotals] (  @CONSTS smallint,  @CONTNBR char(11),  @Posted integer,   @DOCUMENTAMOUNT numeric(19,5) OUTPUT,  @ORGDOCUMENTAMOUNT numeric(19,5) OUTPUT,  @CREDITAMOUNT numeric(19,5) OUTPUT,  @ORGCREDITAMOUNT numeric(19,5) OUTPUT,  @POSTEDAMOUNT numeric(19,5) OUTPUT,  @ORGPOSTEDAMOUNT numeric(19,5) OUTPUT,  @History smallint,   @Version smallint ) As set nocount on  if @History = 1   select  @DOCUMENTAMOUNT = SUM(IsNull(DOCAMNT,0)),   @ORGDOCUMENTAMOUNT = SUM(IsNull(ORDOCAMT,0)),   @CREDITAMOUNT = SUM(IsNull(SVC_Invoice_Credit_Amoun,0)),   @ORGCREDITAMOUNT = SUM(IsNull(OrigInvCreditAmt,0)),   @POSTEDAMOUNT = SUM(IsNull(PSTDAMNT,0)),   @ORGPOSTEDAMOUNT = SUM(IsNull(ORIGPSTDAMNT,0))  FROM SVC00603  WHERE (CONSTS = @CONSTS) AND (CONTNBR = @CONTNBR) and POSTED = @Posted else  select  @DOCUMENTAMOUNT = SUM(IsNull(DOCAMNT,0)),   @ORGDOCUMENTAMOUNT = SUM(IsNull(ORDOCAMT,0)),   @CREDITAMOUNT = SUM(IsNull(SVC_Invoice_Credit_Amoun,0)),   @ORGCREDITAMOUNT = SUM(IsNull(OrigInvCreditAmt,0)),   @POSTEDAMOUNT = SUM(IsNull(PSTDAMNT,0)),   @ORGPOSTEDAMOUNT = SUM(IsNull(ORIGPSTDAMNT,0))  FROM SVC30603  WHERE (CONSTS = @CONSTS) AND (CONTNBR = @CONTNBR) and SVC_Contract_Version = @Version AND POSTED = @Posted   select @DOCUMENTAMOUNT = IsNull(@DOCUMENTAMOUNT,0),   @ORGDOCUMENTAMOUNT = IsNull(@ORGDOCUMENTAMOUNT,0),   @CREDITAMOUNT = IsNull(@CREDITAMOUNT,0),   @ORGCREDITAMOUNT = IsNull(@ORGCREDITAMOUNT,0),   @POSTEDAMOUNT = IsNull(@POSTEDAMOUNT,0),   @ORGPOSTEDAMOUNT = IsNull(@ORGPOSTEDAMOUNT,0) return     
GO
GRANT EXECUTE ON  [dbo].[SVC_GetContractTotals] TO [DYNGRP]
GO
