SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 create procedure [dbo].[glCalcPMBeginningBalance]  @iStartDate varchar(25),  @oBeginBal money OUTPUT  AS  DECLARE  @lSQLError int  SELECT  VCHRNMBR,   TRXSORCE,  (SUM(CRDTAMNT) - SUM(DEBITAMT)) AS ONACCOUNT INTO  #BEGINBAL FROM  PM10100 WHERE  PSTGSTUS = 1 AND  (DISTTYPE = 2 OR DISTTYPE = 3) AND  PSTGDATE < @iStartDate GROUP BY  VCHRNMBR,  TRXSORCE  INSERT INTO  #BEGINBAL SELECT  VCHRNMBR,  TRXSORCE,  (SUM(CRDTAMNT) - SUM(DEBITAMT)) FROM  PM30600 WHERE  PSTGSTUS = 1 AND  (DISTTYPE = 2 OR DISTTYPE = 3) AND  PSTGDATE < @iStartDate GROUP BY  VCHRNMBR, TRXSORCE  SELECT  @oBeginBal = SUM(ONACCOUNT) FROM  #BEGINBAL  RETURN (@lSQLError)    
GO
GRANT EXECUTE ON  [dbo].[glCalcPMBeginningBalance] TO [DYNGRP]
GO
