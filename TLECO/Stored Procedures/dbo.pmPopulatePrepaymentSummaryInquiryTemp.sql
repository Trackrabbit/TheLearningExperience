SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 CREATE procedure [dbo].[pmPopulatePrepaymentSummaryInquiryTemp]  @I_cSummaryTemp char(40) = NULL,  @I_cPopRcptNum char(20) = NULL,  @I_tFunctionalCurrency tinyint=NULL,  @O_iErrorState int          = NULL output as  declare  @cPopRcptNum char(42),  @iError int,  @iStatus int,  @TRUE int,  @FALSE int  select  @O_iErrorState   = 0,  @iStatus         = 0   if @I_cSummaryTemp is NULL or  @I_cPopRcptNum is NULL  begin  select @O_iErrorState = 21096  return  end    exec @iStatus = DYNAMICS..smGetConstantInt 'TRUE', @TRUE output, @O_iErrorState output  select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if ( (@iStatus <> 0) or (@O_iErrorState <> 0) )  return (@iStatus)   exec @iStatus = DYNAMICS..smGetConstantInt 'FALSE', @FALSE output, @O_iErrorState output  select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if ( (@iStatus <> 0) or (@O_iErrorState <> 0) )  return (@iStatus)   Exec @iStatus = smFormatStringsForExecs  @I_cPopRcptNum,  @cPopRcptNum output,  @O_iErrorState output  select @iError = @@error  if @iStatus = 0 and @iError <> 0  select @iStatus = @iError  if (@iStatus <> 0) or (@O_iErrorState <> 0)  return (@iStatus)   exec ('delete ' + @I_cSummaryTemp)  if @I_tFunctionalCurrency=1  exec('insert into ' + @I_cSummaryTemp + '  select A.POPRCTNM,A.PONUMBER,A.PMNTNMBR,A.PrepaymentAmount,A.APPLDAMT,6,B.TRXSORCE   from POP10800 A, POP10170 B  where A.PONUMBER=B.PONUMBER and A.POPRCTNM = ' + @cPopRcptNum + '  ') else   exec('insert into ' + @I_cSummaryTemp + '  select A.POPRCTNM,A.PONUMBER,A.PMNTNMBR,A.OriginatingPrepaymentAmt,A.ORAPPAMT,6,B.TRXSORCE   from POP10800 A, POP10170 B  where A.PONUMBER=B.PONUMBER and A.POPRCTNM = ' + @cPopRcptNum + '  ')  return (@iStatus)   
GO
GRANT EXECUTE ON  [dbo].[pmPopulatePrepaymentSummaryInquiryTemp] TO [DYNGRP]
GO
