SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 CREATE     procedure [dbo].[aagCreateGLDistTemp] @I_nHdrID int = 0, @I_cTableDistTemp nvarchar(30) = null, @I_fPostedTrx tinyint = 0   as  begin create table #aaGLDistTemp  ([aaGLHdrID]  int,   [aaGLDistID]  int,   [INTERID]   char(5),   [CorrespondingUnit] char(5),  [ACTINDX]   int,   [ACCTTYPE]   smallint,  [aaBrowseType]  smallint,   [DECPLACS]   smallint,  [DEBITAMT]   numeric(19,5),   [CRDTAMNT]   numeric(19,5),  [ORDBTAMT]   numeric(19,5),   [ORCRDAMT]   numeric(19,5),  [CURNCYID]   char(15),   [CURRNIDX]   smallint,   [RATETPID]   char(15),   [EXGTBLID]   char(15),  [XCHGRATE]   numeric(19,7),   [EXCHDATE]   datetime,  [TIME1]    datetime,   [RTCLCMTD]   smallint,  [DENXRATE]   numeric(19,7),   [MCTRXSTT]   smallint,  [SEQNUMBR]   int,   [aaCustID]   char(15),  [aaVendID]   char(15),   [aaSiteID]   char(11),  [aaItemID]   char(31),   [aaCopyStatus]  smallint  )  Insert into #aaGLDistTemp ([aaGLHdrID],[aaGLDistID], [INTERID],[CorrespondingUnit],[ACTINDX],[ACCTTYPE],[aaBrowseType],  [DECPLACS],[DEBITAMT],[CRDTAMNT],[ORDBTAMT],[ORCRDAMT],[CURNCYID],[CURRNIDX],  [RATETPID],[EXGTBLID],[XCHGRATE],[EXCHDATE],[TIME1],[RTCLCMTD],[DENXRATE],  [MCTRXSTT],[SEQNUMBR],[aaCustID],[aaVendID],[aaSiteID],[aaItemID],[aaCopyStatus])  select [aaGLHdrID],[aaGLDistID], [INTERID],[CorrespondingUnit],[ACTINDX],[ACCTTYPE],[aaBrowseType],  [DECPLACS],[DEBITAMT],[CRDTAMNT],[ORDBTAMT],[ORCRDAMT],[CURNCYID],[CURRNIDX],  [RATETPID],[EXGTBLID],[XCHGRATE],[EXCHDATE],[TIME1],[RTCLCMTD],[DENXRATE],  [MCTRXSTT],[SEQNUMBR],[aaCustID],[aaVendID],[aaSiteID],[aaItemID],[aaCopyStatus]  from AAG30001 where aaGLHdrID = @I_nHdrID and aaBrowseType <> 0    alter table #aaGLDistTemp add aaDistplayDistID int IDENTITY (1,1)  exec('truncate table ' + @I_cTableDistTemp)  exec('Insert into ' + @I_cTableDistTemp + ' select * from #aaGLDistTemp')   return end    
GO
GRANT EXECUTE ON  [dbo].[aagCreateGLDistTemp] TO [DYNGRP]
GO
