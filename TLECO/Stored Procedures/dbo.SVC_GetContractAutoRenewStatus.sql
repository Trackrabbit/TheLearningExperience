SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 CREATE PROCEDURE [dbo].[SVC_GetContractAutoRenewStatus]  @DUEDATE datetime,  @CONTRACTNUM char(12),  @AUTORENEW smallint OUTPUT AS DECLARE @MinDate datetime BEGIN  EXEC smGetMinDate @MinDate output   IF @DUEDATE > CONVERT(varchar(10),@MinDate,102) + ' 00:00:00'  BEGIN  IF @CONTRACTNUM <> ''   BEGIN  IF EXISTS(SELECT * FROM SVC00600 WHERE Credit_Hold = 0 AND AUTOREN = 1 AND SVC_Evergreen_Contract = 0 AND ENDDATE <= @DUEDATE AND (CONSTS = 2 OR CONSTS = 4) AND CONTNBR = @CONTRACTNUM)  SELECT @AUTORENEW = 1  ELSE  SELECT @AUTORENEW = 0  END  ELSE   BEGIN  IF EXISTS(SELECT * FROM SVC00600 WHERE Credit_Hold = 0 AND AUTOREN = 1 AND SVC_Evergreen_Contract = 0 AND ENDDATE <= @DUEDATE AND (CONSTS = 2 OR CONSTS = 4) AND CONTNBR <> '')  SELECT @AUTORENEW = 1  ELSE  SELECT @AUTORENEW = 0  END  END END    
GO
GRANT EXECUTE ON  [dbo].[SVC_GetContractAutoRenewStatus] TO [DYNGRP]
GO
