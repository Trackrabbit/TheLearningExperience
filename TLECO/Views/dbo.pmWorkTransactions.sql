SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE VIEW [dbo].[pmWorkTransactions] as (  select 0 as 'MKTOPROC',  0 as 'InfoValue',  0 as 'CURRNIDX',   GETDATE() AS 'DOCDATE',  REPLICATE('X', 15) as 'VENDORID',  REPLICATE('X', 65) as 'VENDNAME',  REPLICATE('X', 61) as 'CONTACT',  0 as 'SOURCE',  0 as 'DOCTYPE',  REPLICATE('X', 21) as 'DOCTYNAM',  REPLICATE('X', 21) as 'DOCNUMBR',  REPLICATE('X', 21) as 'Other_Number',  REPLICATE('X', 13) as 'TRXSORCE',  0 as 'CNTRLTYP',  0 as 'DCSTATUS',  0 as 'POSTATUS',  REPLICATE('X', 31) as 'STSDESCR',  9999999999999.99999 as 'DOCAMNT',  REPLICATE('X', 15) as 'CURNCYID',  REPLICATE('X', 15) as 'PRSTADCD',  0 as 'VOIDED',  GETDATE() AS 'PRMDATE',  GETDATE() AS 'REQDATE',  GETDATE() AS 'Workflow_Due_Date',  0 as 'Workflow_Approval_Status',  REPLICATE('X', 51) as 'Workflow_Name',  REPLICATE('X', 238) as 'Workflow_Approver',  0 as 'Workflow_Priority',  REPLICATE('X', 238) as 'Workflow_Originator',  0 as 'HOLD',  GETDATE() AS 'DUEDATE',  GETDATE() AS 'DISCDATE',  0 as 'WF_Step_Type',  REPLICATE('X', 15) as 'BACHNUMB',  REPLICATE('X', 15) as 'BCHSOURC',  0 as 'Emailed',9 as 'Workflow_Status'  where (1 = 0)  UNION ALL  select 0 as 'MKTOPROC',   0 as 'InfoValue',  0 as 'CURRNIDX',  ['PM Transaction WORK'].[DOCDATE] as 'DOCDATE',  rtrim(['PM Transaction WORK'].[VENDORID]) as 'VENDORID',  ['PM Vendor Master'].[VENDNAME] as 'VENDNAME',  ['PM Vendor Master'].[VNDCNTCT] as 'CONTACT',  19 as 'SOURCE',   ['PM Transaction WORK'].[DOCTYPE] as 'DOCTYPE',  DOCTYNAM = dbo.DYN_FUNC_Document_Type_PM_Trx(['PM Transaction WORK'].[DOCTYPE]),  rtrim(['PM Transaction WORK'].[VCHNUMWK]) as 'DOCNUMBR',  rtrim(['PM Transaction WORK'].[DOCNUMBR]) as 'Other_Number',  '' as 'TRXSORCE',  ['PM Transaction WORK'].[CNTRLTYP] as 'CNTRLTYP',  DCSTATUS = 1,   0 as 'POSTATUS',  'Work.' as 'STSDESCR',  ['PM Transaction WORK'].[DOCAMNT] as 'DOCAMNT',  rtrim(['PM Transaction WORK'].[CURNCYID]) as 'CURNCYID',  '' as 'PRSTADCD',  0 as 'VOIDED',  '01-01-1900' as 'PRMDATE',  '01-01-1900' as 'REQDATE',  '01-01-1900' as Workflow_Due_Date,  0 as 'Workflow_Approval_Status',  '' as Workflow_Name,   '' as Workflow_Approver,  0 as Workflow_Priority,  '' as Workflow_Originator,  0 as 'HOLD',  DUEDATE = ['PM Transaction WORK'].[DUEDATE],  DISCDATE = ['PM Transaction WORK'].[DISCDATE],  0 as WF_Step_Type,  ['PM Transaction WORK'].[BACHNUMB] as 'BACHNUMB',  ['PM Transaction WORK'].[BCHSOURC] as 'BCHSOURC',  0 as 'Emailed',['PM Transaction WORK'].[Workflow_Status] as 'Workflow_Status'   from [PM00400] as ['PM Key Master'] with (NOLOCK)  join [PM10000] as ['PM Transaction WORK'] with (NOLOCK)   on (substring(['PM Key Master'].[CNTRLNUM],1,17) = ['PM Transaction WORK'].[VCHNUMWK])  left outer join [PM00200] as ['PM Vendor Master'] with (NOLOCK)  on (['PM Key Master'].[VENDORID] = ['PM Vendor Master'].[VENDORID])  where (['PM Key Master'].[DCSTATUS] = 1  or   ['PM Key Master'].[DCSTATUS] = 0  or   ['PM Key Master'].[DCSTATUS] = -1  ) and  ['PM Key Master'].[CNTRLTYP] = 0  and  ['PM Transaction WORK'].[PSTGSTUS] <> 10   UNION ALL  select 0 as 'MKTOPROC',   0 as 'InfoValue',  0 as 'CURRNIDX',  ['PM_Payment_WORK'].[DOCDATE] as 'DOCDATE',  rtrim(['PM_Payment_WORK'].[VENDORID]) as 'VENDORID',  ['PM Vendor Master'].[VENDNAME] as 'VENDNAME',  ['PM Vendor Master'].[VNDCNTCT] as 'CONTACT',  3 as 'SOURCE',   ['PM_Payment_WORK'].[DOCTYPE] as 'DOCTYPE',  DOCTYNAM = dbo.DYN_FUNC_Document_Type_PM_Trx(['PM_Payment_WORK'].[DOCTYPE]),  rtrim(['PM_Payment_WORK'].[VCHRNMBR]) as 'DOCNUMBR',  rtrim(['PM_Payment_WORK'].[DOCNUMBR]) as 'Other_Number',  '' as 'TRXSORCE',  ['PM_Payment_WORK'].[CNTRLTYP] as 'CNTRLTYP',  DCSTATUS = 1,   0 as 'POSTATUS',  'Work.' as 'STSDESCR',  ['PM_Payment_WORK'].[CHEKTOTL] as 'DOCAMNT',  rtrim(['PM_Payment_WORK'].[CURNCYID]) as 'CURNCYID',  '' as 'PRSTADCD',  ['PM_Payment_WORK'].[VOIDED] as 'VOIDED',  '01-01-1900' as 'PRMDATE',  '01-01-1900' as 'REQDATE',  '01-01-1900' as Workflow_Due_Date,  0 as 'Workflow_Approval_Status',  '' as Workflow_Name,   '' as Workflow_Approver,  0 as Workflow_Priority,  '' as Workflow_Originator,  0 as 'HOLD',  '01-01-1900' as 'DUEDATE',  '01-01-1900' as 'DISCDATE',  0 as WF_Step_Type,  ['PM_Payment_WORK'].[BACHNUMB] as 'BACHNUMB',  ['PM_Payment_WORK'].[BCHSOURC] as 'BCHSOURC',  0 as 'Emailed',9    from [PM00400] as ['PM Key Master'] with (NOLOCK)  join [PM10300] as ['PM_Payment_WORK'] with (NOLOCK)   on (['PM Key Master'].[CNTRLNUM] = ['PM_Payment_WORK'].[VCHRNMBR] and   ['PM Key Master'].[CNTRLNUM] = ['PM_Payment_WORK'].[PMNTNMBR])  left outer join [PM00200] as ['PM Vendor Master'] with (NOLOCK)  on (['PM Key Master'].[VENDORID] = ['PM Vendor Master'].[VENDORID])  where (['PM Key Master'].[DCSTATUS] = 1  or   ['PM Key Master'].[DCSTATUS] = 0  or   ['PM Key Master'].[DCSTATUS] = -1  ) and  ['PM Key Master'].[CNTRLTYP] <> 0  and  ['PM_Payment_WORK'].[PSTGSTUS] <> 10   UNION ALL  select 0 as 'MKTOPROC',   0 as 'InfoValue',  0 as 'CURRNIDX',  ['PM_Manual_Payment_WORK'].[DOCDATE] as 'DOCDATE',  rtrim(['PM_Manual_Payment_WORK'].[VENDORID]) as 'VENDORID',  ['PM Vendor Master'].[VENDNAME] as 'VENDNAME',  ['PM Vendor Master'].[VNDCNTCT] as 'CONTACT',  19 as 'SOURCE',   ['PM_Manual_Payment_WORK'].[DOCTYPE] as 'DOCTYPE',  DOCTYNAM = dbo.DYN_FUNC_Document_Type_PM_Trx(['PM_Manual_Payment_WORK'].[DOCTYPE]),  rtrim(['PM_Manual_Payment_WORK'].[VCHRNMBR]) as 'DOCNUMBR',  rtrim(['PM_Manual_Payment_WORK'].[DOCNUMBR]) as 'Other_Number',  '' as 'TRXSORCE',  ['PM_Manual_Payment_WORK'].[CNTRLTYP] as 'CNTRLTYP',  DCSTATUS = 1,   0 as 'POSTATUS',  'Work.' as 'STSDESCR',  ['PM_Manual_Payment_WORK'].[DOCAMNT] as 'DOCAMNT',  rtrim(['PM_Manual_Payment_WORK'].[CURNCYID]) as 'CURNCYID',  '' as 'PRSTADCD',  0 as 'VOIDED',  '01-01-1900' as 'PRMDATE',  '01-01-1900' as 'REQDATE',  '01-01-1900' as Workflow_Due_Date,  0 as 'Workflow_Approval_Status',  '' as Workflow_Name,   '' as Workflow_Approver,  0 as Workflow_Priority,  '' as Workflow_Originator,  0 as 'HOLD',  '01-01-1900' as 'DUEDATE',  '01-01-1900' as 'DISCDATE',  0 as WF_Step_Type,  ['PM_Manual_Payment_WORK'].[BACHNUMB] as 'BACHNUMB',  ['PM_Manual_Payment_WORK'].[BCHSOURC] as 'BCHSOURC',  0 as 'Emailed',9    from [PM00400] as ['PM Key Master'] with (NOLOCK)  join [PM10400] as ['PM_Manual_Payment_WORK'] with (NOLOCK)   on (['PM Key Master'].[CNTRLNUM] = ['PM_Manual_Payment_WORK'].[PMNTNMBR])  left outer join [PM00200] as ['PM Vendor Master'] with (NOLOCK)  on (['PM Key Master'].[VENDORID] = ['PM Vendor Master'].[VENDORID])  where (['PM Key Master'].[DCSTATUS] = 1  or   ['PM Key Master'].[DCSTATUS] = 0  or   ['PM Key Master'].[DCSTATUS] = -1  ) and  ['PM Key Master'].[CNTRLTYP] <> 0   )    
GO
GRANT SELECT ON  [dbo].[pmWorkTransactions] TO [DYNGRP]
GO
GRANT INSERT ON  [dbo].[pmWorkTransactions] TO [DYNGRP]
GO
GRANT DELETE ON  [dbo].[pmWorkTransactions] TO [DYNGRP]
GO
GRANT UPDATE ON  [dbo].[pmWorkTransactions] TO [DYNGRP]
GO
