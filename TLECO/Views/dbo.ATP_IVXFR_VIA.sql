SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE VIEW [dbo].[ATP_IVXFR_VIA] AS  SELECT IV00101.ITEMNMBR,   SVC00701.ITLOCN AS LOCNCODE,   case   when SVC00700.ETADTE = convert(char(11), '1900/01/01', 100) then SVC00700.ORDRDATE  else SVC00700.ETADTE  end  AS EXPDATE,  9 AS TABLETYPE,  0 AS SOPTYPE,  3 AS DOCTYPE,  SVC00701.ORDDOCID AS DOCNUMBER,  SVC00701.LNITMSEQ,  'Transfer' AS DBCRID,  'Transfer' AS DBCRNAME,  QUANTITY = case   when SVC00701.QTYFULFI > 0 then abs(SVC00701.QTYFULFI + (SVC00701.QTYSHPPD - SVC00701.QTYRECVD))  when SVC00701.QTYSHPPD > 0 and SVC00701.TRNSFQTY - SVC00701.QTYSHPPD - SVC00701.QTYRECVD > 0 then abs(SVC00701.TRNSFQTY - SVC00701.QTYSHPPD - SVC00701.QTYRECVD)  else 0  end,  BACKORDER = 0,  ALLOCATED = SVC00701.QTYSHPPD,  SVC00701.UOFM,  SVC00701.QTYBSUOM,  0 AS BALANCE,  'IVT' AS TYPE  FROM IV00101 LEFT OUTER JOIN SVC00700  INNER JOIN SVC00701 ON SVC00700.ORDDOCID = SVC00701.ORDDOCID   ON IV00101.ITEMNMBR = SVC00701.ITEMNMBR  WHERE (SVC00701.QTYFULFI > 0) or (SVC00701.QTYSHPPD > 0 and SVC00701.TRNSFQTY - SVC00701.QTYSHPPD - SVC00701.QTYRECVD > 0)    
GO
GRANT SELECT ON  [dbo].[ATP_IVXFR_VIA] TO [DYNGRP]
GO
GRANT INSERT ON  [dbo].[ATP_IVXFR_VIA] TO [DYNGRP]
GO
GRANT DELETE ON  [dbo].[ATP_IVXFR_VIA] TO [DYNGRP]
GO
GRANT UPDATE ON  [dbo].[ATP_IVXFR_VIA] TO [DYNGRP]
GO
