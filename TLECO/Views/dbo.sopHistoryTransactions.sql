SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE VIEW [dbo].[sopHistoryTransactions] as (  select 0 as 'MKTOPROC',  0 as 'InfoValue',  0 as 'CURRNIDX',   GETDATE() AS 'DOCDATE',  0 as 'SOURCE',  0 as 'DOCTYPE',  REPLICATE('X', 21) as 'DOCTYNAM',  REPLICATE('X', 21) as 'DOCNUMBR',  REPLICATE('X', 15) as 'CUSTNMBR',  REPLICATE('X', 65) as 'CUSTNAME',  0 as 'PROSPECT',  0 as 'DCSTATUS',  REPLICATE('X', 31) as 'STSDESCR',  9999999999999.99999 as 'DOCAMNT',  REPLICATE('X', 15) as 'CURNCYID',  REPLICATE('X', 21) as 'CSTPONBR',  REPLICATE('X', 15) as 'PRSTADCD',  REPLICATE('X', 15) as 'SLPRSNID',  REPLICATE('X', 21) as 'SOPNUMBE',  0 as 'SOPSTATUS',  REPLICATE('X', 51) as 'SOPSTSDESCR',  REPLICATE('X', 21) as 'INVCNMBR',  0 as 'VOIDED',  REPLICATE('X', 15) as 'PRCHLDID',  GETDATE() AS 'QUOEXPDA',  GETDATE() AS 'ReqShipDate',  0 as 'ALLOCABY',  REPLICATE('X', 15) as 'DOCID',  0 as 'Password_Valid',  REPLICATE('X', 51) as 'Workflow_Name',  0 as 'Workflow_Approval_Status',  GETDATE() AS 'Workflow_Due_Date',  0 as 'Workflow_Priority',  REPLICATE('X', 238) as 'Workflow_Originator',  REPLICATE('X', 238) as 'Workflow_Approver',  9999999999999.9999 as 'QTYTOPURCH',  0 as 'SHIPCOMPLETE',  0 as 'WF_Step_Type',  REPLICATE('X', 15) as 'BACHNUMB',  REPLICATE('X', 15) as 'BCHSOURC',  0 as 'Emailed'  where (1 = 0)  union all    select 0 as 'MKTOPROC',   0 as 'InfoValue',  0 as 'CURRNIDX',  ['Sales Transaction Hist'].[DOCDATE] as 'DOCDATE',  11 as 'SOURCE',   ['Sales Transaction Hist'].[SOPTYPE] as 'DOCTYPE',  DOCTYNAM = dbo.DYN_FUNC_SOP_Type(['Sales Transaction Hist'].[SOPTYPE]),  rtrim(['Sales Transaction Hist'].[SOPNUMBE]) as 'DOCNUMBR',  rtrim(['Sales Transaction Hist'].[CUSTNMBR]) as 'CUSTNMBR',  rtrim(['Sales Transaction Hist'].[CUSTNAME]) as 'CUSTNAME',  ['Sales Transaction Hist'].[PROSPECT] as 'PROSPECT',  DCSTATUS = 3,  STSDESCR = 'Hist',  ['Sales Transaction Hist'].[DOCAMNT] as 'DOCAMNT',  rtrim(['Sales Transaction Hist'].[CURNCYID]) as 'CURNCYID',   rtrim(['Sales Transaction Hist'].[CSTPONBR]) as 'CSTPONBR',  rtrim(['Sales Transaction Hist'].[PRSTADCD]) as 'PRSTADCD',  rtrim(['Sales Transaction Hist'].[SLPRSNID]) as 'SLPRSNID',  '' as 'SOPNUMBE',  SOPSTATUS = ['Sales Transaction Hist'].[SOPSTATUS],  SOPSTSDESCR = isnull(dbo.DYN_FUNC_SOP_Status(['Sales Transaction Hist'].[SOPSTATUS]), ''),  '' as 'INVCNMBR',  ['Sales Transaction Hist'].[VOIDSTTS] as 'VOIDED',  '' as 'PRCHLDID',  ['Sales Transaction Hist'].[QUOEXPDA] as 'QUOEXPDA',  ['Sales Transaction Hist'].[ReqShipDate] as 'ReqShipDate',  ['Sales Transaction Hist'].[ALLOCABY] as 'ALLOCABY',  rtrim(['Sales Transaction Hist'].[DOCID]) as 'DOCID',  Password_Valid=0,  Workflow_Name='',   Workflow_Approval_Status = case ['Sales Transaction Hist'].[SOPTYPE]  when 1 then ['Sales Transaction Hist'].[WorkflowApprStatusQuote]  when 2 then ['Sales Transaction Hist'].[WorkflowApprStatCreditLm]  when 3 then ['Sales Transaction Hist'].[WorkflowApprStatCreditLm]  when 6 then ['Sales Transaction Hist'].[WorkflowApprStatCreditLm]  else 0  end,  '01-01-1900' as 'Workflow_Due_Date',  Workflow_Priority = case ['Sales Transaction Hist'].[SOPTYPE]  when 1 then ['Sales Transaction Hist'].[WorkflowPriorityQuote]  else ['Sales Transaction Hist'].[WorkflowPriorityCreditLm]  end,  '' as 'Workflow_Originator',  '' as 'Workflow_Approver',  0 as 'QTYTOPURCH',  ['Sales Transaction Hist'].[SHIPCOMPLETE] as 'SHIPCOMPLETE',  0 as 'WF_Step_Type',  rtrim(['Sales Transaction Hist'].[BACHNUMB]) as 'BACHNUMB',  rtrim(['Sales Transaction Hist'].[BCHSOURC]) as 'BCHSOURC',  Emailed = dbo.coIsDocumentEmailed(0,11,['Sales Transaction Hist'].[SOPTYPE] ,['Sales Transaction Hist'].[SOPNUMBE])   from [SOP30200] as ['Sales Transaction Hist'] with (NOLOCK)  )    
GO
GRANT SELECT ON  [dbo].[sopHistoryTransactions] TO [DYNGRP]
GO
GRANT INSERT ON  [dbo].[sopHistoryTransactions] TO [DYNGRP]
GO
GRANT DELETE ON  [dbo].[sopHistoryTransactions] TO [DYNGRP]
GO
GRANT UPDATE ON  [dbo].[sopHistoryTransactions] TO [DYNGRP]
GO
