SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
CREATE VIEW [dbo].[PurchaseRequisitions] AS select rtrim(['Purchasing Requisition Work'].[POPRequisitionNumber]) as 'Requisition Number', rtrim(['Purchasing Requisition Work'].[RequisitionDescription]) as 'Description', 'Status' = dbo.DYN_FUNC_Requisition_Status(['Purchasing Requisition Work'].[RequisitionStatus]), ['Purchasing Requisition Work'].[DOCDATE] as 'Document Date', ['Purchasing Requisition Work'].[REQDATE] as 'Required Date', rtrim(['Purchasing Requisition Work'].[REQSTDBY]) as 'Requested By', ['Purchasing Requisition Work'].[DOCAMNT] as 'Document Amount',  rtrim(['Purchasing Requisition Work'].[ADDRESS1]) as 'Address 1', rtrim(['Purchasing Requisition Work'].[ADDRESS2]) as 'Address 2', rtrim(['Purchasing Requisition Work'].[ADDRESS3]) as 'Address 3', rtrim(['Purchasing Requisition Work'].[CCode]) as 'Country Code', rtrim(['Purchasing Requisition Work'].[CITY]) as 'City', rtrim(['Purchasing Requisition Work'].[CONTACT]) as 'Contact', rtrim(['Purchasing Requisition Work'].[COMMNTID]) as 'Comment ID', rtrim(['Purchasing Requisition Work'].[COUNTRY]) as 'Country', rtrim(['Purchasing Requisition Work'].[CMPNYNAM]) as 'Company Name', ['Purchasing Requisition Work'].[CREATDDT] as 'Created Date', 'Document Status' = dbo.DYN_FUNC_Requisition_Document_Status(1), rtrim(['Purchasing Requisition Work'].[FAX]) as 'Fax', 'Invalid Data Flag' = case ['Purchasing Requisition Work'].[Flags] when 0 then dbo.DYN_FUNC_Boolean_All(0) else dbo.DYN_FUNC_Boolean_All(1) end, ['Purchasing Requisition Work'].[MODIFDT] as 'Modified Date', rtrim(['Purchasing Requisition Work'].[PHONE1]) as 'Phone 1', rtrim(['Purchasing Requisition Work'].[PHONE2]) as 'Phone 2', rtrim(['Purchasing Requisition Work'].[PHONE3]) as 'Phone 3', rtrim(['Purchasing Requisition Work'].[PRSTADCD]) as 'Primary Ship to Address ID', rtrim(['Purchasing Requisition Work'].[STATE]) as 'State', rtrim(['Purchasing Requisition Work'].[USERDEF1]) as 'User Defined 1', rtrim(['Purchasing Requisition Work'].[USERDEF1]) as 'User Defined 2', rtrim(['Purchasing Requisition Work'].[USER2ENT]) as 'User To Enter', 'Voided' = dbo.DYN_FUNC_Boolean_All(0), rtrim(['Purchasing Requisition Work'].[DomainUserName]) as 'Windows Account', 'Workflow Status' = dbo.DYN_FUNC_Workflow_Status(['Purchasing Requisition Work'].[Workflow_Status]), rtrim(['Purchasing Requisition Work'].[ZIPCODE]) as 'Zip Code', 'Requisition Number For Drillback' = 'dgpp://DGPB/?Db=&Srv=TLEFLSQL3&Cmp=TLECO&Prod=0' +dbo.dgppPurchaseRequisitionNumber(1,['Purchasing Requisition Work'].[POPRequisitionNumber],0 )  from [POP10200] as ['Purchasing Requisition Work'] with (NOLOCK)  union all select rtrim(['Purchasing Requisition History'].[POPRequisitionNumber]) as 'Requisition Number', rtrim(['Purchasing Requisition History'].[RequisitionDescription]) as 'Description', 'Status' = dbo.DYN_FUNC_Requisition_Status(['Purchasing Requisition History'].[RequisitionStatus]), ['Purchasing Requisition History'].[DOCDATE] as 'Document Date', ['Purchasing Requisition History'].[REQDATE] as 'Required Date', rtrim(['Purchasing Requisition History'].[REQSTDBY]) as 'Requested By', ['Purchasing Requisition History'].[DOCAMNT] as 'Document Amount',  rtrim(['Purchasing Requisition History'].[ADDRESS1]) as 'Address 1', rtrim(['Purchasing Requisition History'].[ADDRESS2]) as 'Address 2', rtrim(['Purchasing Requisition History'].[ADDRESS3]) as 'Address 3', rtrim(['Purchasing Requisition History'].[CCode]) as 'Country Code', rtrim(['Purchasing Requisition History'].[CITY]) as 'City', rtrim(['Purchasing Requisition History'].[CONTACT]) as 'Contact', rtrim(['Purchasing Requisition History'].[COMMNTID]) as 'Comment ID', rtrim(['Purchasing Requisition History'].[COUNTRY]) as 'Country', rtrim(['Purchasing Requisition History'].[CMPNYNAM]) as 'Company Name', ['Purchasing Requisition History'].[CREATDDT] as 'Created Date', 'Document Status' = dbo.DYN_FUNC_Requisition_Document_Status(2), rtrim(['Purchasing Requisition History'].[FAX]) as 'Fax', 'Invalid Data Flag' = case ['Purchasing Requisition History'].[Flags] when 0 then dbo.DYN_FUNC_Boolean_All(0) else dbo.DYN_FUNC_Boolean_All(1) end, ['Purchasing Requisition History'].[MODIFDT] as 'Modified Date', rtrim(['Purchasing Requisition History'].[PHONE1]) as 'Phone 1', rtrim(['Purchasing Requisition History'].[PHONE2]) as 'Phone 2', rtrim(['Purchasing Requisition History'].[PHONE3]) as 'Phone 3', rtrim(['Purchasing Requisition History'].[PRSTADCD]) as 'Primary Ship to Address ID', rtrim(['Purchasing Requisition History'].[STATE]) as 'State', rtrim(['Purchasing Requisition History'].[USERDEF1]) as 'User Defined 1', rtrim(['Purchasing Requisition History'].[USERDEF1]) as 'User Defined 2', rtrim(['Purchasing Requisition History'].[USER2ENT]) as 'User To Enter', 'Voided' = dbo.DYN_FUNC_Boolean_All(['Purchasing Requisition History'].[VOIDED]), rtrim(['Purchasing Requisition History'].[DomainUserName]) as 'Windows Account', 'Workflow Status' = dbo.DYN_FUNC_Workflow_Status(['Purchasing Requisition History'].[Workflow_Status]), rtrim(['Purchasing Requisition History'].[ZIPCODE]) as 'Zip Code', 'Requisition Number For Drillback' = 'dgpp://DGPB/?Db=&Srv=TLEFLSQL3&Cmp=TLECO&Prod=0' +dbo.dgppPurchaseRequisitionNumber(1,['Purchasing Requisition History'].[POPRequisitionNumber],1 )        from [POP30200] as ['Purchasing Requisition History'] with (NOLOCK) 
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [DYNGRP]
GO
GRANT INSERT ON  [dbo].[PurchaseRequisitions] TO [DYNGRP]
GO
GRANT DELETE ON  [dbo].[PurchaseRequisitions] TO [DYNGRP]
GO
GRANT UPDATE ON  [dbo].[PurchaseRequisitions] TO [DYNGRP]
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [rpt_accounting manager]
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [rpt_executive]
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [rpt_operations manager]
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [rpt_purchasing agent]
GO
GRANT SELECT ON  [dbo].[PurchaseRequisitions] TO [rpt_purchasing manager]
GO
