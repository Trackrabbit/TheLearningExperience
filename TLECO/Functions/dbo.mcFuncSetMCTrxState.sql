SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE FUNCTION [dbo].[mcFuncSetMCTrxState]  (  @I_cCurrencyID char(15) = NULL,  @I_cFunctional_Currency char(15) = NULL,  @I_cEuroCurrency char(15) = NULL,  @I_tEuroEnabled tinyint  = NULL,  @I_tFunctionalEnabled tinyint  = NULL,  @MC_NOEURO int  = NULL,  @MC_NONDENOM_TO_NONDENOM int  = NULL,  @MC_NONDENOM_TO_EURO int  = NULL,  @MC_NONDENOM_TO_DENOM int  = NULL,  @MC_DENOM_TO_NONDENOM int  = NULL,  @MC_DENOM_TO_DENOM int  = NULL,  @MC_DENOM_TO_EURO int  = NULL,  @MC_EURO_TO_DENOM int  = NULL,  @MC_EURO_TO_NONDENOM int  = NULL,  @MULTIPLY int  = NULL,  @DIVIDE int  = NULL  )  RETURNS smallint AS  BEGIN   declare @iStatus int,  @FALSE int,  @TRUE int,  @nMCTRXSTT smallint   select @FALSE = 0,  @TRUE = 1,  @iStatus = 1,  @nMCTRXSTT = 0   select @nMCTRXSTT = case  when (@FALSE = @I_tEuroEnabled) then  @MC_NOEURO  when (@FALSE = @I_tFunctionalEnabled)   and (@FALSE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE ))   and (@I_cEuroCurrency != @I_cCurrencyID)  and (@I_cEuroCurrency != @I_cFunctional_Currency) then  @MC_NONDENOM_TO_NONDENOM  when (@FALSE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE ))   and (@I_cEuroCurrency = @I_cFunctional_Currency) then  @MC_NONDENOM_TO_EURO  when (@TRUE = @I_tFunctionalEnabled)   and (@FALSE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE ))   and (@I_cCurrencyID != @I_cEuroCurrency) then  @MC_NONDENOM_TO_DENOM  when (@FALSE = @I_tFunctionalEnabled)   and (@TRUE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE ))   and (@I_cEuroCurrency != @I_cFunctional_Currency) then  @MC_DENOM_TO_NONDENOM  when (@TRUE = @I_tFunctionalEnabled)   and (@TRUE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE )) then  @MC_DENOM_TO_DENOM  when (@TRUE = isnull(( select ENABLED from MC60400 where DENOMCURR = @I_cCurrencyID), @FALSE ))   and (@I_cFunctional_Currency = @I_cEuroCurrency) then  @MC_DENOM_TO_EURO  when (@TRUE = @I_tFunctionalEnabled)   and (@I_cCurrencyID = @I_cEuroCurrency) then  @MC_EURO_TO_DENOM  when (@FALSE = @I_tFunctionalEnabled)   and (@I_cFunctional_Currency != @I_cEuroCurrency)  and (@I_cCurrencyID = @I_cEuroCurrency) then  @MC_EURO_TO_NONDENOM  else   -1  end   RETURN(@nMCTRXSTT) END   
GO
GRANT EXECUTE ON  [dbo].[mcFuncSetMCTrxState] TO [DYNGRP]
GO
