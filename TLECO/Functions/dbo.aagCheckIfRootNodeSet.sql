SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE   FUNCTION [dbo].[aagCheckIfRootNodeSet] ( @aaBudgetID CHAR(15), @aaBudgetTreeID INT )RETURNS  INT AS BEGIN DECLARE @RESULT FLOAT SELECT @RESULT = SUM(Balance) FROM AAG00904  A WHERE  aaCodeSequence= ( SELECT  aaCodeSequence FROM AAG00902 WHERE aaBudgetTreeID = @aaBudgetTreeID AND aaLevel = 0 ) AND  aaBudgetID = @aaBudgetID  IF @RESULT>0  BEGIN SET @RESULT =  1 END ELSE BEGIN SET @RESULT =  0 END RETURN  @RESULT END    
GO
GRANT EXECUTE ON  [dbo].[aagCheckIfRootNodeSet] TO [DYNGRP]
GO
