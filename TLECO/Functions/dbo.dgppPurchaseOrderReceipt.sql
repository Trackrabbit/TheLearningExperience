SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
 CREATE FUNCTION [dbo].[dgppPurchaseOrderReceipt]  (  @action int,  @SOURCE int,  @DCSTATUS int,  @DOCTYPE int,  @VENDORID varchar(15),  @DOCNUMBR varchar(20),  @POPIVCNO varchar(17),  @MenuID int,  @CurrencyView int,  @POPRCTNM varchar(17),  @PONUMBER varchar(20)  )  RETURNS varchar(2000) AS BEGIN   DECLARE @ActionType varchar(15),  @FunctionName varchar(50),  @URIstring varchar(255),  @OriginID int,  @EncodedVENDORID varchar(255),  @EncodedDOCNUMBR varchar(255),  @EncodedPOPIVCNO varchar(255),  @EncodedPOPRCTNM varchar(255),  @EncodedPONUMBER varchar(255)   select @FunctionName = 'OpenPORcpt'   if @action=1  select @ActionType = 'OPEN'  else  select @ActionType = 'OPEN'   select @EncodedVENDORID = DYNAMICS.dbo.encodeUrlString(rtrim(@VENDORID));  select @EncodedDOCNUMBR = DYNAMICS.dbo.encodeUrlString(rtrim(@DOCNUMBR));  select @EncodedPOPIVCNO = DYNAMICS.dbo.encodeUrlString(rtrim(@POPIVCNO));  select @EncodedPOPRCTNM = DYNAMICS.dbo.encodeUrlString(rtrim(@POPRCTNM));  select @EncodedPONUMBER = DYNAMICS.dbo.encodeUrlString(rtrim(@PONUMBER));   if @DCSTATUS = 1   select @OriginID=4   else  select @OriginID=3    select @URIstring = '&Act='+@ActionType+'&Func=' + @FunctionName +   '&SOURCE=' + ltrim(str(@SOURCE)) +  '&DCSTATUS=' + ltrim(str(@DCSTATUS)) +  '&DOCTYPE=' + ltrim(str(@DOCTYPE)) +   '&VENDORID=' + ltrim(@EncodedVENDORID) +  '&DOCNUMBR=' + ltrim(@EncodedDOCNUMBR) +  '&POPIVCNO=' + ltrim(@EncodedPOPIVCNO) +  '&MenuID=' + ltrim(str(@MenuID)) +  '&OriginID=' + ltrim(str(@OriginID)) +  '&CurncyView=' + ltrim(str(@CurrencyView)) +  '&POPRCTNM=' + ltrim(@EncodedPOPRCTNM) +  '&PONUMBER=' + ltrim(@EncodedPONUMBER)   RETURN(@URIstring) END   
GO
GRANT EXECUTE ON  [dbo].[dgppPurchaseOrderReceipt] TO [DYNGRP]
GO
