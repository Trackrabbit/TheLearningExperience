SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO
CREATE PROCEDURE [dbo].[ws_get_SY09100]  
(  
   @SECURITYROLEID   char(25)= NULL,  
   @SECURITYROLENAME   char(51) = NULL,  
   @SECURITYROLEDESC   char(255) = NULL,  
   @SECROLETYPE   smallint = NULL,  
   @CRUSRID   char(15) = NULL,  
   @CREATDDT   datetime = NULL,  
   @MDFUSRID   char(15) = NULL,  
   @MODIFDT   datetime = NULL,  
   @DEX_ROW_ID   int = NULL,  
   @RETURNVALUE INT = NULL OUT  
)  
AS  
   
DECLARE @ERROR_VAR INT  
DECLARE @ROWCOUNT_VAR INT  
   
SELECT   
   [SECURITYROLEID],  
   [SECURITYROLENAME],  
   [SECURITYROLEDESC],  
   [SECROLETYPE],  
   [CRUSRID],  
   [CREATDDT],  
   [MDFUSRID],  
   [MODIFDT],  
   [DEX_ROW_ID]  
FROM [dbo].[SY09100]  
WHERE  
   [SECURITYROLEID] = case when @SECURITYROLEID IS NULL then [SECURITYROLEID] else @SECURITYROLEID end AND  
   [SECURITYROLENAME] = case when @SECURITYROLENAME IS NULL then [SECURITYROLENAME] else @SECURITYROLENAME end AND  
   [SECURITYROLEDESC] = case when @SECURITYROLEDESC IS NULL then [SECURITYROLEDESC] else @SECURITYROLEDESC end AND  
   [SECROLETYPE] = case when @SECROLETYPE IS NULL then [SECROLETYPE] else @SECROLETYPE end AND  
   [CRUSRID] = case when @CRUSRID IS NULL then [CRUSRID] else @CRUSRID end AND  
   [CREATDDT] = case when @CREATDDT IS NULL then [CREATDDT] else @CREATDDT end AND  
   [MDFUSRID] = case when @MDFUSRID IS NULL then [MDFUSRID] else @MDFUSRID end AND  
   [MODIFDT] = case when @MODIFDT IS NULL then [MODIFDT] else @MODIFDT end AND  
   [DEX_ROW_ID] = case when @DEX_ROW_ID IS NULL then [DEX_ROW_ID] else @DEX_ROW_ID end  
   
SELECT @ERROR_VAR = @@ERROR,@ROWCOUNT_VAR=@@ROWCOUNT  
   
IF @ERROR_VAR = 0 AND @ROWCOUNT_VAR = 1  
   BEGIN  
      SET @RETURNVALUE = 0  
   END  
ELSE  
   BEGIN  
      IF @ERROR_VAR <> 0   
         SET @RETURNVALUE = @ERROR_VAR  
      ELSE  
         SET @RETURNVALUE =  -99 -- UNEXPECTED NR OF RECORDS AFFECTED  
   END  
   
 
GO
GRANT EXECUTE ON  [dbo].[ws_get_SY09100] TO [DYNGRP]
GO
